name: Dynamic Readme
description: Dynamically update READMEs 

runs:
  using: "composite"
  steps:
    - name: "üì•  Fetching Repository Contents"
      uses: actions/checkout@main

    - name: "üíæ  Github Repository Metadata"
      uses: varunsridharan/action-repository-meta@main
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    - name: "üí´  VS Utility"
      uses: varunsridharan/action-vs-utility@main

    - name: "‚ö° Repository - Before Hook"
      shell: bash
      run: |
        echo " "
        if [ -f $VS_BEFORE_HOOK_FILE_LOCATION ]; then
          echo "‚úÖ Before Hook File Found : $VS_BEFORE_HOOK_FILE_LOCATION"
          sh $VS_BEFORE_HOOK_FILE_LOCATION
        else
          echo "‚ö†Ô∏è No Before Hook File Found : $VS_BEFORE_HOOK_FILE_LOCATION"
        fi
        echo " "

    - name: "üí´  Update README.md"
      uses: "varunsridharan/action-dynamic-readme@main"
      with:
        GLOBAL_TEMPLATE_REPOSITORY: thoughtbot/templates
        files: |
          README.md
          README.md.template
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

    - name: "‚ö° Repository - After Hook"
      shell: bash
      run: |
        echo " "
        if [ -f $VS_AFTER_HOOK_FILE_LOCATION ]; then
          echo "‚úÖ After Hook File Found : $VS_AFTER_HOOK_FILE_LOCATION"
          sh $VS_AFTER_HOOK_FILE_LOCATION
        else
          echo "‚ö†Ô∏è No After Hook File Found : $VS_AFTER_HOOK_FILE_LOCATION"
        fi
        echo " "
